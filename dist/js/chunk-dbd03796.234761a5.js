(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbd03796"],{"43b7":function(t,e,a){"use strict";a("d750")},"71f7":function(t,e,a){"use strict";a.r(e);var s=a("7496"),n=a("8336"),o=a("b0af"),i=a("99d9"),r=a("62ad"),c=a("169a"),d=a("8860"),l=a("da13"),u=a("5d23"),f=a("e449"),m=a("0fd9"),p=a("b974"),_=a("2fa4"),b=(a("c5f6"),function(){var t=this,e=t._self._c;return e(s["a"],{staticClass:"p-4"},[e("h2",{staticClass:"page-title mb-0"},[t._v("Orders")]),e("small",[t._v("Order listing")]),e("b-row",{staticClass:"mt-4"},[e("b-col",[e("Widget",{attrs:{title:"",customHeader:""}},[e("h5",{staticClass:"d-inline-block"},[t._v("Manage  "),e("span",{staticClass:"fw-semi-bold"},[t._v("Orders")])]),e("VueElementLoading",{attrs:{active:t.loading,spinner:"bar-fade-scale",color:"var(--primary)",text:"Loading..",duration:"0.6"}}),e("div",{staticClass:"mt-3"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e(m["a"],{staticClass:"bg-isnfo"},[e(r["a"],{attrs:{cols:"12",md:"8"}},[e(p["a"],{attrs:{items:["pending","processing","delivered"],label:"Status",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1)],1)],1)]),e("div",{staticClass:"table-responsive mt-4"},[e("table",{staticClass:"table table-hover table-sm mb-0 requests-table"},[e("thead",[e("tr",[e("th",{staticClass:"hidden-sm-down"},[t._v("ID")]),e("th",{staticClass:"hidden-sm-down"},[t._v("USER INFO")]),e("th",{staticClass:"hidden-sm-down"},[t._v("DATE")]),e("th",{staticClass:"hidden-sm-down"},[t._v("PRODUCT")]),e("th",{staticClass:"hidden-sm-down"},[t._v("Quote Reference")]),e("th",{staticClass:"hidden-sm-down"},[t._v("QUANTITY ")]),e("th",{staticClass:"hidden-sm-down"},[t._v("AMOUNT")]),e("th",{staticClass:"hidden-sm-down"},[t._v("STATUS")]),e("th",{staticClass:"hidden-sm-down text-center"},[t._v("Action")])])]),e("tbody",t._l(t.allOrders.data,(function(a,s){return e("tr",{key:s},[e("td",[t._v("#"+t._s(s+1))]),e("td",[e("span",{staticClass:"d-flex"},[e("span",[e("span",{staticClass:"b-avatar rounded-circle",class:t.getRandomBadgeClass(),staticStyle:{"max-width":"70px","max-height":"38px","font-weight":"600"},attrs:{"data-v-35abef6f":""}},[t._v("\n                                                    "+t._s(t.getInitials(a.user.first_name))+"\n                                                ")])]),e("span",{staticClass:"ml-3"},[e("span",{staticClass:"fw-semi-bold"},[t._v("  "+t._s(a.user.first_name))]),e("p",[e("small",[e("span",{staticClass:"text-semi-muted"},[t._v("  "+t._s(a.user.email))])]),e("br"),e("small",[e("span",{staticClass:"text-semi-muted"},[t._v("  "+t._s(a.user.phone))])])])])])]),e("td",[t._v("\n                                      "+t._s(new Date(a.created_at).toDateString())+"\n                                    ")]),e("td",[t._v("\n                                        "+t._s(a.products&&a.products.product_name)+" -> "+t._s(a.products.nested_sub_category&&a.products.nested_sub_category.full_name)+"\n                                    ")]),e("td",[t._v(t._s(a.reference_no))]),e("td",[t._v("\n                                     "+t._s(a.quantity)+"\n                                    ")]),e("td",[t._v("\n                                        "+t._s(Number(a.amount).toLocaleString())+"\n                                    ")]),e("td",[e("span",{staticClass:"badge",class:{"badge-warning":"pending"==a.status,"badge-info":"processing"==a.status,"badge-success":"delivered"==a.status}},[t._v("\n                                            "+t._s(a.status.toUpperCase())+"\n                                       ")])]),e("td",{staticClass:"text-center",staticStyle:{"font-size":"18px"}},[e(f["a"],{attrs:{bottom:"",origin:"center center",transition:"scale-transition","close-on-content-click":t.closeOnContentClick,left:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,o=a.attrs;return[e(n["a"],t._g(t._b({attrs:{color:"black",icon:""}},"v-btn",o,!1),s),[e("i",{staticClass:"fa fa-list-ul"})])]}}],null,!0)},[e(d["a"],["completed"!=a.status?e(l["a"],[e(u["b"],{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.relatedOrders(a)}}},[e("i",{staticClass:"mdi mdi-square-edit-outline mr-1"}),t._v(" Manage Related Order\n                                                    ")])],1):t._e(),"pending"==a.status||"processing"==a.status?e(l["a"],[e(u["b"],{staticStyle:{cursor:"pointer"},on:{click:function(e){t.openConfirm=!0,t.dynamic_status="delivered",t.status_id=a.id}}},[e("i",{staticClass:"mdi mdi-square-edit-outline mr-1"}),t._v(" Delivered\n                                                    ")])],1):t._e(),"pending"==a.status?e(l["a"],[e(u["b"],{staticStyle:{cursor:"pointer"},on:{click:function(e){t.openConfirm=!0,t.dynamic_status="processing",t.status_id=a.id}}},[e("i",{staticClass:"mdi mdi-square-edit-outline mr-1"}),t._v(" Processing\n                                                    ")])],1):t._e()],1)],1)],1)])})),0)])])]),e("div",{staticClass:"col-md-12"},[e("laravelVuePagination",{attrs:{data:t.allOrders},on:{"pagination-change-page":t.fetchData}})],1)],1)],1)],1),e("b-modal",{staticStyle:{background:"white"},attrs:{size:"lg",title:"Related Order ",id:"related_order","hide-footer":""}},[e("RelatedOrders",{attrs:{data:t.relData,my_model:t.$bvModal},on:{submitted:function(e){return t.fetchData()}}})],1),e("b-modal",{staticStyle:{background:"white"},attrs:{size:"lg",title:"View Property",id:"view","hide-footer":""}},[e("viewModal",{attrs:{my_model:t.$bvModal,data:t.current}})],1),e("b-modal",{staticStyle:{background:"white"},attrs:{size:"lg",title:"Edit Property",id:"edit","hide-footer":""}},[e("edit",{attrs:{my_model:t.$bvModal,data:t.current},on:{updated:function(e){return t.fetchData()}}})],1),e(c["a"],{attrs:{"max-width":"390"},model:{value:t.openConfirm,callback:function(e){t.openConfirm=e},expression:"openConfirm"}},[e(o["a"],[e(i["c"],{staticClass:"text-h5"},[t._v("\n            Change Order status to "+t._s(t.dynamic_status)+"\n            ")]),e(i["b"],[t._v("\n            Are you sure you want to perform this operation ?\n            ")]),e(i["a"],[e(_["a"]),e(n["a"],{attrs:{color:" darken-1",text:""},on:{click:function(e){t.openConfirm=!1}}},[t._v("\n                No, exit\n            ")]),e(n["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(e){t.toggle_status(t.status_id,t.dynamic_status),t.openConfirm=!1}}},[t._v("\n                Yes, continue\n            ")])],1)],1)],1),e(c["a"],{attrs:{"max-width":"390"},model:{value:t.openConfirm2,callback:function(e){t.openConfirm2=e},expression:"openConfirm2"}},[e(o["a"],[e(i["c"],{staticClass:"text-h5"},[t._v("\n            Delete property\n            ")]),e(i["b"],[t._v("\n            Are you sure you want to perform this operation ?\n            ")]),e(i["a"],[e(_["a"]),e(n["a"],{attrs:{color:" darken-1",text:""},on:{click:function(e){t.openConfirm2=!1}}},[t._v("\n                No, exit\n            ")]),e(n["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(e){t.deleteProperty(t.del_id),t.openConfirm2=!1}}},[t._v("\n                Yes, continue\n            ")])],1)],1)],1)],1)}),g=[],v=(a("8e6e"),a("ac6a"),a("456d"),a("28a5"),a("bd86")),h=a("4506"),C=a("a523"),y=a("8654"),O=(a("7f7f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"_body"},[e("form",{attrs:{action:""}},[e(i["b"],{staticClass:"_body"},[e(C["a"],{staticClass:"px-0"},[e(m["a"],[e(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(y["a"],{attrs:{label:"Name*",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(p["a"],{attrs:{items:["active","inactive"],label:"Status*",disabled:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),e(r["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e("div",{staticStyle:{height:"400px"},domProps:{innerHTML:t._s(t.form.description)}})])],1)],1)],1),e(i["a"],{staticStyle:{"margin-top":"100px"}},[e(_["a"]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.closeMe()}}},[t._v("\n                Cancel\n            ")])],1)],1)])}),k=[],w={props:["my_model","data"],data:function(){return{form:this.data}},methods:{closeMe:function(){this.$bvModal.hide("view")}}},x=w,S=a("2877"),P=Object(S["a"])(x,O,k,!1,null,null,null),D=P.exports,j=function(){var t=this,e=t._self._c;return e("div",[e(s["a"],[e("div",{staticClass:"card"},[e("form",[e("div",{staticClass:"card-body"},[e("div",{staticClass:"alert alert-info"},[e("h5",[t._v("Below are the list of orders with the same order no.")]),e("p",[t._v("You can manage thier status at once")]),e("p",[t._v("Order Number "),e("span",{staticClass:"text-warning"},[t._v(t._s(t.data[0].order_no))])])]),e("div",{staticClass:"filter"},[e(r["a"],{attrs:{cols:"12",md:"6"}},[e(p["a"],{attrs:{items:t.filterData,label:"Status",outlined:""},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1)],1),e("div",{staticClass:"data card-body shadow-sm"},[e("div",{staticClass:"table-responsive mt-4"},[e("table",{staticClass:"table table-hover table-sm mb-0 requests-table"},[e("thead",[e("tr",[e("th",{staticClass:"hidden-sm-down"},[t._v("ID")]),e("th",{staticClass:"hidden-sm-down"},[t._v("DATE")]),e("th",{staticClass:"hidden-sm-down"},[t._v("PRODUCT")]),e("th",{staticClass:"hidden-sm-down"},[t._v("QUANTITY ")]),e("th",{staticClass:"hidden-sm-down"},[t._v("AMOUNT")]),e("th",{staticClass:"hidden-sm-down"},[t._v("TOTAL")]),e("th",{staticClass:"hidden-sm-down text-center"},[t._v("Action")])])]),e("tbody",t._l(t.data,(function(a,s){return e("tr",{key:s},[e("td",[t._v("#"+t._s(s+1))]),e("td",[t._v("\n                                          "+t._s(a.created_at)+"\n                                      ")]),e("td",[t._v("\n                                          "+t._s(a.products&&a.products.product_name)+" ->"+t._s(a.products.nested_sub_category&&a.products.nested_sub_category.full_name)+"\n                                      ")]),e("td",[t._v("\n                                          "+t._s(a.quantity)+"\n                                      ")]),e("td",[t._v("\n                                          "+t._s(Number(a.amount).toLocaleString())+"\n                                      ")]),e("td",[e("span",{staticClass:"badge",class:{"badge-warning":"pending"==a.status,"badge-info":"processing"==a.status,"badge-success":"completed"==a.status}},[t._v("\n                                              "+t._s(a.status.toUpperCase())+"\n                                          ")])]),e("td",{staticClass:"text-center",staticStyle:{"font-size":"18px"}},[e(f["a"],{attrs:{bottom:"",origin:"center center",transition:"scale-transition","close-on-content-click":t.closeOnContentClick,left:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,o=a.attrs;return[e(n["a"],t._g(t._b({attrs:{color:"black",icon:""}},"v-btn",o,!1),s),[e("i",{staticClass:"fa fa-list-ul"})])]}}],null,!0)},[e(d["a"],[e(l["a"],[e(u["b"],{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.relatedOrders(a)}}},[e("i",{staticClass:"mdi mdi-square-edit-outline mr-1"}),t._v(" Manage Related Order\n                                                      ")])],1),"pending"==a.status||"processing"==a.status?e(l["a"],[e(u["b"],{staticStyle:{cursor:"pointer"},on:{click:function(e){t.openConfirm=!0,t.dynamic_status="completed",t.status_id=a.id}}},[e("i",{staticClass:"mdi mdi-square-edit-outline mr-1"}),t._v(" Completed\n                                                      ")])],1):t._e(),"pending"==a.status?e(l["a"],[e(u["b"],{staticStyle:{cursor:"pointer"},on:{click:function(e){t.openConfirm=!0,t.dynamic_status="processing",t.status_id=a.id}}},[e("i",{staticClass:"mdi mdi-square-edit-outline mr-1"}),t._v(" Processing\n                                                      ")])],1):t._e()],1)],1)],1)])})),0)])])])]),e(r["a"],{staticClass:"text-center",attrs:{cols:"12",sm:"12"}},[e("button",{staticClass:"btn btn-block btn-lg btn-outline-info",attrs:{type:"button"},on:{click:function(e){return t.toggle_status(t.data[0].order_no,t.filters.status,!0)}}},[t._v("SAVE CHANGES")]),e("button",{staticClass:"btn btn-block btn-lg btn-outline-primary",attrs:{type:"button"},on:{click:t.closeMe}},[t._v("Cancel")])])],1)]),e(c["a"],{attrs:{"max-width":"390"},model:{value:t.openConfirm,callback:function(e){t.openConfirm=e},expression:"openConfirm"}},[e(o["a"],[e(i["c"],{staticClass:"text-h5"},[t._v("\n              Change Order status to "+t._s(t.dynamic_status)+"\n              ")]),e(i["b"],[t._v("\n              Are you sure you want to perform this operation ?\n              ")]),e(i["a"],[e(_["a"]),e(n["a"],{attrs:{color:" darken-1",text:""},on:{click:function(e){t.openConfirm=!1}}},[t._v("\n                  No, exit\n              ")]),e(n["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(e){t.toggle_status(t.status_id,t.dynamic_status),t.openConfirm=!1}}},[t._v("\n                  Yes, continue\n              ")])],1)],1)],1),e(c["a"],{attrs:{"max-width":"390"},model:{value:t.openConfirm2,callback:function(e){t.openConfirm2=e},expression:"openConfirm2"}},[e(o["a"],[e(i["c"],{staticClass:"text-h5"},[t._v("\n              Delete property\n              ")]),e(i["b"],[t._v("\n              Are you sure you want to perform this operation ?\n              ")]),e(i["a"],[e(_["a"]),e(n["a"],{attrs:{color:" darken-1",text:""},on:{click:function(e){t.openConfirm2=!1}}},[t._v("\n                  No, exit\n              ")]),e(n["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(e){t.deleteProperty(t.del_id),t.openConfirm2=!1}}},[t._v("\n                  Yes, continue\n              ")])],1)],1)],1)],1)],1)},A=[],M={props:["data","my_model"],data:function(){var t;return t={filters:{status:null},status_id:0,del_id:0,dynamic_status:"",openConfirm:!1,openConfirm2:!1,dialog:!1,isDialogVisible:!1,closeOnContentClick:!0,filterData:[]},Object(v["a"])(t,"dialog",!1),Object(v["a"])(t,"status_id",0),Object(v["a"])(t,"del_id",0),Object(v["a"])(t,"dynamic_status",""),t},mounted:function(){var t=this;this.filterData=["pending","processing","completed","shipped"].filter((function(e){return e!=t.data[0].status}))},methods:{toggle_status:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={reference:t,status:e};s?n.every_order_no=!0:delete n.every_order_no,this.$api.post(this.dynamic_route("/order/admin/change-status"),n).then((function(t){a.closeMe(),a.$emit("submitted"),a.$toasted.success("Status Updated successful",{action:{text:"Close",onClick:function(t,e){e.goAway(0)}}})})).catch((function(t){a.$toasted.error(t.response.data.message,{action:{text:"Close",onClick:function(t,e){e.goAway(0)}}})})).finally((function(){NProgress.done()}))},closeMe:function(){this.filters.status=null,this.my_model.hide("related_order")}}},N=M,$=(a("43b7"),Object(S["a"])(N,j,A,!1,null,null,null)),T=$.exports,U=a("bc3a"),B=a.n(U),R=a("6ad0"),q=a.n(R),E=a("7211"),L=a.n(E),V=a("2f62");function z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?z(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var I={components:{Widget:h["a"],viewModal:D,RelatedOrders:T,VueElementLoading:q.a,laravelVuePagination:L.a},data:function(){return{status_id:0,del_id:0,dynamic_status:"",openConfirm:!1,openConfirm2:!1,dialog:!1,current:{},relData:[],properties:{data:[]},filters:{},loading:!1,isDialogVisible:!1,closeOnContentClick:!0,allOrders:{data:[]}}},computed:H({},Object(V["d"])("modules_data",["sub_categories","nested_sub_categories","product_disease"])),mounted:function(){this.getNestedSubCategories(),this.fetchData()},methods:H(H({},Object(V["c"])("modules_data",["getNestedSubCategories"])),{},{getInitials:function(t){var e=t.trim().split(" "),a=e.reduce((function(t,a,s){return 0!==s&&s!==e.length-1||(t="".concat(t).concat(a.charAt(0).toUpperCase())),t}),"");return a},getRandomBadgeClass:function(){var t=["badge-info","badge-primary","badge-danger","badge-success","badge-warning","badge-secondary"];return t[Math.floor(Math.random()*t.length)]},pass_current:function(t){this.current=t},fetchData:function(){var t=this;this.loading=!0,this.$api.post(this.dynamic_route("/order/admin/get-all-order"),{filters:this.filters}).then((function(e){t.allOrders=e.data.data})).catch((function(t){})).finally((function(){t.loading=!1,NProgress.done()}))},toggle_status:function(t,e){var a=this,s={reference:t,status:e};this.$api.post(this.dynamic_route("/order/admin/change-status"),s).then((function(t){a.fetchData()})).catch((function(t){a.$toasted.error(t.response.data.message,{action:{text:"Close",onClick:function(t,e){e.goAway(0)}}})})).finally((function(){NProgress.done()}))},relatedOrders:function(t){var e=this.allOrders.data.filter((function(e){return e.status==t.status&&e.order_no==t.order_no}));this.relData=e,this.$bvModal.show("related_order")},deleteProperty:function(t){var e=this;this.loading=!0,B.a.delete(this.dynamic_route("/properties/".concat(t)),{headers:{authorization:"Bearer ".concat(this.authToken)}}).then((function(){e.fetchData(),e.$toast.success("Deleted successfully!",{position:"top-center",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})).catch((function(t){return e.loading=!1,401==t.response.status&&"Unauthorized"==t.response.statusText?e.logoutUser():500==t.response.status?e.$toast.error("Unable to delete property  it has been used in many places!",{position:"top-center",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):void 0})).finally((function(){e.loading=!1}))},linkPage:function(){this.$router.push({name:"CreateProduct"})}})},Y=I,W=(a("d0cc"),Object(S["a"])(Y,b,g,!1,null,"7ca6adba",null));e["default"]=W.exports},"772f":function(t,e,a){},a523:function(t,e,a){"use strict";a("f559"),a("ac6a"),a("456d"),a("20f6"),a("4b85");var s=a("2b0e");function n(t){return s["default"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,a){var s=a.props,n=a.data,o=a.children;n.staticClass="".concat(t," ").concat(n.staticClass||"").trim();var i=n.attrs;if(i){n.attrs={};var r=Object.keys(i).filter((function(t){if("slot"===t)return!1;var e=i[t];return t.startsWith("data-")?(n.attrs[t]=e,!1):e||"string"===typeof e}));r.length&&(n.staticClass+=" ".concat(r.join(" ")))}return s.id&&(n.domProps=n.domProps||{},n.domProps.id=s.id),e(s.tag,n,o)}})}var o=a("d9f7");e["a"]=n("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var a,s=e.props,n=e.data,i=e.children,r=n.attrs;return r&&(n.attrs={},a=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(n.attrs[t]=e,!1):e||"string"===typeof e}))),s.id&&(n.domProps=n.domProps||{},n.domProps.id=s.id),t(s.tag,Object(o["a"])(n,{staticClass:"container",class:Array({"container--fluid":s.fluid}).concat(a||[])}),i)}})},d0cc:function(t,e,a){"use strict";a("772f")},d750:function(t,e,a){}}]);